apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: groupsyncs.redhatcop.redhat.io
spec:
  group: redhatcop.redhat.io
  names:
    kind: GroupSync
    listKind: GroupSyncList
    plural: groupsyncs
    singular: groupsync
  scope: Cluster
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: GroupSync is the Schema for the groupsyncs API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: GroupSyncSpec defines the desired state of GroupSync
          properties:
            providers:
              description: List of Providers that can be mounted by containers belonging to the pod.
              items:
                description: Provider represents the container for a single provider
                properties:
                  azure:
                    description: Azure represents the Azure provider
                    properties:
                      credentialsSecret:
                        description: CredentialsSecret is a reference to a secret containing authentication details for communicating to Azure
                        properties:
                          key:
                            description: Key represents the specific key to reference from the secret
                            type: string
                          name:
                            description: Name represents the name of the secret
                            type: string
                          namespace:
                            description: Namespace represents the namespace containing the secret
                            type: string
                        required:
                          - name
                          - namespace
                        type: object
                      groups:
                        description: Groups represents a filtered list of groups to synchronize
                        items:
                          type: string
                        type: array
                      insecure:
                        description: Insecure specifies whether to allow for unverified certificates to be used when communicating to Azure
                        type: boolean
                      url:
                        description: URL is the location of the Azure platform
                        type: string
                    required:
                      - credentialsSecret
                    type: object
                  github:
                    description: GitHub represents the GitHub provider
                    properties:
                      caSecret:
                        description: CaSecret is a reference to a secret containing a CA certificate to communicate to the GitHub server
                        properties:
                          key:
                            description: Key represents the specific key to reference from the secret
                            type: string
                          name:
                            description: Name represents the name of the secret
                            type: string
                          namespace:
                            description: Namespace represents the namespace containing the secret
                            type: string
                        required:
                          - name
                          - namespace
                        type: object
                      credentialsSecret:
                        description: CredentialsSecret is a reference to a secret containing authentication details for the GitHub server
                        properties:
                          key:
                            description: Key represents the specific key to reference from the secret
                            type: string
                          name:
                            description: Name represents the name of the secret
                            type: string
                          namespace:
                            description: Namespace represents the namespace containing the secret
                            type: string
                        required:
                          - name
                          - namespace
                        type: object
                      insecure:
                        description: Insecure specifies whether to allow for unverified certificates to be used when communicating to GitHab
                        type: boolean
                      organization:
                        description: Organization represents the location to source teams to synchronize
                        type: string
                      teams:
                        description: Teams represents a filtered list of teams to synchronize
                        items:
                          type: string
                        type: array
                      url:
                        description: URL is the location of the GitHub server
                        type: string
                    required:
                      - credentialsSecret
                    type: object
                  gitlab:
                    description: GitLab represents the GitLab provider
                    properties:
                      caSecret:
                        description: CaSecret is a reference to a secret containing a CA certificate to communicate to the GitLab server
                        properties:
                          key:
                            description: Key represents the specific key to reference from the secret
                            type: string
                          name:
                            description: Name represents the name of the secret
                            type: string
                          namespace:
                            description: Namespace represents the namespace containing the secret
                            type: string
                        required:
                          - name
                          - namespace
                        type: object
                      credentialsSecret:
                        description: CredentialsSecret is a reference to a secret containing authentication details for the GitLab server
                        properties:
                          key:
                            description: Key represents the specific key to reference from the secret
                            type: string
                          name:
                            description: Name represents the name of the secret
                            type: string
                          namespace:
                            description: Namespace represents the namespace containing the secret
                            type: string
                        required:
                          - name
                          - namespace
                        type: object
                      groups:
                        description: Groups represents a filtered list of groups to synchronize
                        items:
                          type: string
                        type: array
                      insecure:
                        description: Insecure specifies whether to allow for unverified certificates to be used when communicating to GitLab
                        type: boolean
                      url:
                        description: URL is the location of the GitLub server
                        type: string
                    required:
                      - credentialsSecret
                    type: object
                  keycloak:
                    description: Keycloak represents the Keycloak provider
                    properties:
                      caSecret:
                        description: CaSecret is a reference to a secret containing a CA certificate to communicate to the Keycloak server
                        properties:
                          key:
                            description: Key represents the specific key to reference from the secret
                            type: string
                          name:
                            description: Name represents the name of the secret
                            type: string
                          namespace:
                            description: Namespace represents the namespace containing the secret
                            type: string
                        required:
                          - name
                          - namespace
                        type: object
                      credentialsSecret:
                        description: CredentialsSecret is a reference to a secret containing authentication details for the Keycloak server
                        properties:
                          key:
                            description: Key represents the specific key to reference from the secret
                            type: string
                          name:
                            description: Name represents the name of the secret
                            type: string
                          namespace:
                            description: Namespace represents the namespace containing the secret
                            type: string
                        required:
                          - name
                          - namespace
                        type: object
                      groups:
                        description: Groups represents a filtered list of groups to synchronize
                        items:
                          type: string
                        type: array
                      insecure:
                        description: Insecure specifies whether to allow for unverified certificates to be used when communicating to Keycloak
                        type: boolean
                      loginRealm:
                        description: LoginRealm is the Keycloak realm to authenticate against
                        type: string
                      realm:
                        description: Realm is the realm containing the groups to synchronize against
                        type: string
                      scope:
                        description: Scope represents the depth for which groups will be synchronized
                        enum:
                          - one
                          - sub
                        type: string
                      url:
                        description: URL is the location of the Keycloak server
                        type: string
                    required:
                      - credentialsSecret
                      - realm
                      - url
                    type: object
                  ldap:
                    description: Ldap represents the LDAP provider
                    properties:
                      activeDirectory:
                        description: ActiveDirectoryConfig represents the configuration for Active Directory
                        properties:
                          groupMembershipAttributes:
                            description: GroupMembershipAttributes defines which attributes on an LDAP user entry will be interpreted as the groups it is a member of
                            items:
                              type: string
                            type: array
                          userNameAttributes:
                            description: UserNameAttributes defines which attributes on an LDAP user entry will be interpreted as its OpenShift user name.
                            items:
                              type: string
                            type: array
                          usersQuery:
                            description: AllUsersQuery holds the template for an LDAP query that returns user entries.
                            properties:
                              baseDN:
                                description: The DN of the branch of the directory where all searches should start from
                                type: string
                              derefAliases:
                                description: 'The (optional) behavior of the search with regards to alisases. Can be: never:  never dereference aliases, search: only dereference in searching, base:   only dereference in finding the base object, always: always dereference Defaults to always dereferencing if not set'
                                type: string
                              filter:
                                description: Filter is a valid LDAP search filter that retrieves all relevant entries from the LDAP server with the base DN
                                type: string
                              pageSize:
                                description: PageSize is the maximum preferred page size, measured in LDAP entries. A page size of 0 means no paging will be done.
                                type: integer
                              scope:
                                description: 'The (optional) scope of the search. Can be: base: only the base object, one:  all object on the base level, sub:  the entire subtree Defaults to the entire subtree if not set'
                                type: string
                              timeout:
                                description: TimeLimit holds the limit of time in seconds that any request to the server can remain outstanding before the wait for a response is given up. If this is 0, no client-side limit is imposed
                                type: integer
                            required:
                              - baseDN
                            type: object
                        required:
                          - groupMembershipAttributes
                          - userNameAttributes
                          - usersQuery
                        type: object
                      augmentedActiveDirectory:
                        description: ActiveDirectoryConfig represents the configuration for Augmented Active Directory
                        properties:
                          groupMembershipAttributes:
                            description: GroupMembershipAttributes defines which attributes on an LDAP user entry will be interpreted as the groups it is a member of
                            items:
                              type: string
                            type: array
                          groupNameAttributes:
                            description: GroupNameAttributes defines which attributes on an LDAP group entry will be interpreted as its name to use for an OpenShift group
                            items:
                              type: string
                            type: array
                          groupUIDAttribute:
                            description: GroupUIDAttributes defines which attribute on an LDAP group entry will be interpreted as its unique identifier. (ldapGroupUID)
                            type: string
                          groupsQuery:
                            description: AllGroupsQuery holds the template for an LDAP query that returns group entries.
                            properties:
                              baseDN:
                                description: The DN of the branch of the directory where all searches should start from
                                type: string
                              derefAliases:
                                description: 'The (optional) behavior of the search with regards to alisases. Can be: never:  never dereference aliases, search: only dereference in searching, base:   only dereference in finding the base object, always: always dereference Defaults to always dereferencing if not set'
                                type: string
                              filter:
                                description: Filter is a valid LDAP search filter that retrieves all relevant entries from the LDAP server with the base DN
                                type: string
                              pageSize:
                                description: PageSize is the maximum preferred page size, measured in LDAP entries. A page size of 0 means no paging will be done.
                                type: integer
                              scope:
                                description: 'The (optional) scope of the search. Can be: base: only the base object, one:  all object on the base level, sub:  the entire subtree Defaults to the entire subtree if not set'
                                type: string
                              timeout:
                                description: TimeLimit holds the limit of time in seconds that any request to the server can remain outstanding before the wait for a response is given up. If this is 0, no client-side limit is imposed
                                type: integer
                            required:
                              - baseDN
                            type: object
                          userNameAttributes:
                            description: UserNameAttributes defines which attributes on an LDAP user entry will be interpreted as its OpenShift user name.
                            items:
                              type: string
                            type: array
                          usersQuery:
                            description: AllUsersQuery holds the template for an LDAP query that returns user entries.
                            properties:
                              baseDN:
                                description: The DN of the branch of the directory where all searches should start from
                                type: string
                              derefAliases:
                                description: 'The (optional) behavior of the search with regards to alisases. Can be: never:  never dereference aliases, search: only dereference in searching, base:   only dereference in finding the base object, always: always dereference Defaults to always dereferencing if not set'
                                type: string
                              filter:
                                description: Filter is a valid LDAP search filter that retrieves all relevant entries from the LDAP server with the base DN
                                type: string
                              pageSize:
                                description: PageSize is the maximum preferred page size, measured in LDAP entries. A page size of 0 means no paging will be done.
                                type: integer
                              scope:
                                description: 'The (optional) scope of the search. Can be: base: only the base object, one:  all object on the base level, sub:  the entire subtree Defaults to the entire subtree if not set'
                                type: string
                              timeout:
                                description: TimeLimit holds the limit of time in seconds that any request to the server can remain outstanding before the wait for a response is given up. If this is 0, no client-side limit is imposed
                                type: integer
                            required:
                              - baseDN
                            type: object
                        required:
                          - groupMembershipAttributes
                          - groupNameAttributes
                          - groupUIDAttribute
                          - groupsQuery
                          - userNameAttributes
                          - usersQuery
                        type: object
                      blacklist:
                        description: Black represents a list of groups to not synchronize
                        items:
                          type: string
                        type: array
                      caSecret:
                        description: CaSecret is a reference to a secret containing a CA certificate to communicate to the GitLab server
                        properties:
                          key:
                            description: Key represents the specific key to reference from the secret
                            type: string
                          name:
                            description: Name represents the name of the secret
                            type: string
                          namespace:
                            description: Namespace represents the namespace containing the secret
                            type: string
                        required:
                          - name
                          - namespace
                        type: object
                      credentialsSecret:
                        description: CredentialsSecret is a reference to a secret containing authentication details for communicating to LDAP
                        properties:
                          key:
                            description: Key represents the specific key to reference from the secret
                            type: string
                          name:
                            description: Name represents the name of the secret
                            type: string
                          namespace:
                            description: Namespace represents the namespace containing the secret
                            type: string
                        required:
                          - name
                          - namespace
                        type: object
                      groupUIDNameMapping:
                        additionalProperties:
                          type: string
                        description: / LDAPGroupUIDToOpenShiftGroupNameMapping is an optional direct mapping of LDAP group UIDs to OpenShift group names
                        type: object
                      insecure:
                        description: Insecure specifies whether to allow for unverified certificates to be used when communicating to LDAP
                        type: boolean
                      rfc2307:
                        description: RFC2307Config represents the configuration for a RFC2307 schema
                        properties:
                          groupMembershipAttributes:
                            description: GroupMembershipAttributes defines which attributes on an LDAP group entry will be interpreted  as its members. The values contained in those attributes must be queryable by your UserUIDAttribute
                            items:
                              type: string
                            type: array
                          groupNameAttributes:
                            description: GroupNameAttributes defines which attributes on an LDAP group entry will be interpreted as its name to use for an OpenShift group
                            items:
                              type: string
                            type: array
                          groupUIDAttribute:
                            description: GroupUIDAttributes defines which attribute on an LDAP group entry will be interpreted as its unique identifier. (ldapGroupUID)
                            type: string
                          groupsQuery:
                            description: AllGroupsQuery holds the template for an LDAP query that returns group entries.
                            properties:
                              baseDN:
                                description: The DN of the branch of the directory where all searches should start from
                                type: string
                              derefAliases:
                                description: 'The (optional) behavior of the search with regards to alisases. Can be: never:  never dereference aliases, search: only dereference in searching, base:   only dereference in finding the base object, always: always dereference Defaults to always dereferencing if not set'
                                type: string
                              filter:
                                description: Filter is a valid LDAP search filter that retrieves all relevant entries from the LDAP server with the base DN
                                type: string
                              pageSize:
                                description: PageSize is the maximum preferred page size, measured in LDAP entries. A page size of 0 means no paging will be done.
                                type: integer
                              scope:
                                description: 'The (optional) scope of the search. Can be: base: only the base object, one:  all object on the base level, sub:  the entire subtree Defaults to the entire subtree if not set'
                                type: string
                              timeout:
                                description: TimeLimit holds the limit of time in seconds that any request to the server can remain outstanding before the wait for a response is given up. If this is 0, no client-side limit is imposed
                                type: integer
                            required:
                              - baseDN
                            type: object
                          tolerateMemberNotFoundErrors:
                            description: TolerateMemberNotFoundErrors determines the behavior of the LDAP sync job when missing user entries are encountered. If 'true', an LDAP query for users that doesn't find any will be tolerated and an only and error will be logged. If 'false', the LDAP sync job will fail if a query for users doesn't find any. The default value is 'false'. Misconfigured LDAP sync jobs with this flag set to 'true' can cause group membership to be removed, so it is recommended to use this flag with caution.
                            type: boolean
                          tolerateMemberOutOfScopeErrors:
                            description: TolerateMemberOutOfScopeErrors determines the behavior of the LDAP sync job when out-of-scope user entries are encountered. If 'true', an LDAP query for a user that falls outside of the base DN given for the all user query will be tolerated and only an error will be logged. If 'false', the LDAP sync job will fail if a user query would search outside of the base DN specified by the all user query. Misconfigured LDAP sync jobs with this flag set to 'true' can result in groups missing users, so it is recommended to use this flag with caution.
                            type: boolean
                          userNameAttributes:
                            description: UserNameAttributes defines which attributes on an LDAP user entry will be used, in order, as its OpenShift user name. The first attribute with a non-empty value is used. This should match your PreferredUsername setting for your LDAPPasswordIdentityProvider
                            items:
                              type: string
                            type: array
                          userUIDAttribute:
                            description: UserUIDAttribute defines which attribute on an LDAP user entry will be interpreted as its unique identifier. It must correspond to values that will be found from the GroupMembershipAttributes
                            type: string
                          usersQuery:
                            description: AllUsersQuery holds the template for an LDAP query that returns user entries.
                            properties:
                              baseDN:
                                description: The DN of the branch of the directory where all searches should start from
                                type: string
                              derefAliases:
                                description: 'The (optional) behavior of the search with regards to alisases. Can be: never:  never dereference aliases, search: only dereference in searching, base:   only dereference in finding the base object, always: always dereference Defaults to always dereferencing if not set'
                                type: string
                              filter:
                                description: Filter is a valid LDAP search filter that retrieves all relevant entries from the LDAP server with the base DN
                                type: string
                              pageSize:
                                description: PageSize is the maximum preferred page size, measured in LDAP entries. A page size of 0 means no paging will be done.
                                type: integer
                              scope:
                                description: 'The (optional) scope of the search. Can be: base: only the base object, one:  all object on the base level, sub:  the entire subtree Defaults to the entire subtree if not set'
                                type: string
                              timeout:
                                description: TimeLimit holds the limit of time in seconds that any request to the server can remain outstanding before the wait for a response is given up. If this is 0, no client-side limit is imposed
                                type: integer
                            required:
                              - baseDN
                            type: object
                        required:
                          - groupMembershipAttributes
                          - groupNameAttributes
                          - groupUIDAttribute
                          - groupsQuery
                          - userNameAttributes
                          - userUIDAttribute
                          - usersQuery
                        type: object
                      url:
                        description: URL is the location of the LDAP Server
                        type: string
                      whitelist:
                        description: Whitelist represents a list of groups to synchronize
                        items:
                          type: string
                        type: array
                    required:
                      - url
                    type: object
                  name:
                    description: Name represents the name of the provider
                    type: string
                type: object
              type: array
            schedule:
              type: string
          type: object
        status:
          description: GroupSyncStatus defines the observed state of GroupSync
          properties:
            conditions:
              description: Conditions is a set of Condition instances.
              items:
                description: "Condition represents an observation of an object's state. Conditions are an extension mechanism intended to be used when the details of an observation are not a priori known or would not apply to all instances of a given Kind. \n Conditions should be added to explicitly convey properties that users and components care about rather than requiring those properties to be inferred from other observations. Once defined, the meaning of a Condition can not be changed arbitrarily - it becomes part of the API, and has the same backwards- and forwards-compatibility concerns of any other part of the API."
                properties:
                  lastTransitionTime:
                    format: date-time
                    type: string
                  message:
                    type: string
                  reason:
                    description: ConditionReason is intended to be a one-word, CamelCase representation of the category of cause of the current status. It is intended to be used in concise output, such as one-line kubectl get output, and in summarizing occurrences of causes.
                    type: string
                  status:
                    type: string
                  type:
                    description: "ConditionType is the type of the condition and is typically a CamelCased word or short phrase. \n Condition types should indicate state in the \"abnormal-true\" polarity. For example, if the condition indicates when a policy is invalid, the \"is valid\" case is probably the norm, so the condition should be called \"Invalid\"."
                    type: string
                required:
                  - status
                  - type
                type: object
              type: array
            lastSyncSuccessTime:
              description: LastSyncSuccessTime represents the time last synchronization completed successfully
              format: date-time
              type: string
          type: object
      type: object
  version: v1alpha1
  versions:
    - name: v1alpha1
      served: true
      storage: true
