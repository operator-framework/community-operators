apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: hiveconfigs.hive.openshift.io
spec:
  group: hive.openshift.io
  names:
    kind: HiveConfig
    listKind: HiveConfigList
    plural: hiveconfigs
    singular: hiveconfig
  scope: Cluster
  subresources:
    status: {}
  validation:
    openAPIV3Schema:
      description: HiveConfig is the Schema for the hives API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: HiveConfigSpec defines the desired state of Hive
          properties:
            additionalCertificateAuthoritiesSecretRef:
              description: AdditionalCertificateAuthoritiesSecretRef is a list of
                references to secrets in the TargetNamespace that contain an additional
                Certificate Authority to use when communicating with target clusters.
                These certificate authorities will be used in addition to any self-signed
                CA generated by each cluster on installation.
              items:
                description: LocalObjectReference contains enough information to let
                  you locate the referenced object inside the same namespace.
                properties:
                  name:
                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                      TODO: Add other useful fields. apiVersion, kind, uid?'
                    type: string
                type: object
              type: array
            backup:
              description: Backup specifies configuration for backup integration.
                If absent, backup integration will be disabled.
              properties:
                minBackupPeriodSeconds:
                  description: MinBackupPeriodSeconds specifies that a minimum of
                    MinBackupPeriodSeconds will occur in between each backup. This
                    is used to rate limit backups. This potentially batches together
                    multiple changes into 1 backup. No backups will be lost as changes
                    that happen during this interval are queued up and will result
                    in a backup happening once the interval has been completed.
                  type: integer
                velero:
                  description: Velero specifies configuration for the Velero backup
                    integration.
                  properties:
                    enabled:
                      description: Enabled dictates if Velero backup integration is
                        enabled. If not specified, the default is disabled.
                      type: boolean
                    namespace:
                      description: Namespace specifies in which namespace velero backup
                        objects should be created. If not specified, the default is
                        a namespace named "velero".
                      type: string
                  type: object
              type: object
            controllersConfig:
              description: ControllersConfig is used to configure different hive controllers
              properties:
                controllers:
                  description: Controllers contains a list of configurations for different
                    controllers
                  items:
                    description: SpecificControllerConfig contains the configuration
                      for a specific controller
                    properties:
                      config:
                        description: ControllerConfig contains the configuration for
                          the controller specified by Name field
                        properties:
                          clientBurst:
                            description: ClientBurst specifies client rate limiter
                              burst for a controller
                            format: int32
                            type: integer
                          clientQPS:
                            description: ClientQPS specifies client rate limiter QPS
                              for a controller
                            format: int32
                            type: integer
                          concurrentReconciles:
                            description: ConcurrentReconciles specifies number of
                              concurrent reconciles for a controller
                            format: int32
                            type: integer
                          queueBurst:
                            description: QueueBurst specifies workqueue rate limiter
                              burst for a controller
                            format: int32
                            type: integer
                          queueQPS:
                            description: QueueQPS specifies workqueue rate limiter
                              QPS for a controller
                            format: int32
                            type: integer
                          replicas:
                            description: Replicas specifies the number of replicas
                              the specific controller pod should use. This is ONLY
                              for controllers that have been split out into their
                              own pods. This is ignored for all others.
                            format: int32
                            type: integer
                        type: object
                      name:
                        description: Name specifies the name of the controller
                        enum:
                        - clusterDeployment
                        - clusterrelocate
                        - clusterstate
                        - clusterversion
                        - controlPlaneCerts
                        - dnsendpoint
                        - dnszone
                        - remoteingress
                        - remotemachineset
                        - syncidentityprovider
                        - unreachable
                        - velerobackup
                        - clusterprovision
                        - clusterDeprovision
                        - clusterpool
                        - clusterpoolnamespace
                        - hibernation
                        - clusterclaim
                        - metrics
                        - clustersync
                        type: string
                    required:
                    - config
                    - name
                    type: object
                  type: array
                default:
                  description: Default specifies default configuration for all the
                    controllers, can be used to override following coded defaults
                    default for concurrent reconciles is 5 default for client qps
                    is 5 default for client burst is 10 default for queue qps is 10
                    default for queue burst is 100
                  properties:
                    clientBurst:
                      description: ClientBurst specifies client rate limiter burst
                        for a controller
                      format: int32
                      type: integer
                    clientQPS:
                      description: ClientQPS specifies client rate limiter QPS for
                        a controller
                      format: int32
                      type: integer
                    concurrentReconciles:
                      description: ConcurrentReconciles specifies number of concurrent
                        reconciles for a controller
                      format: int32
                      type: integer
                    queueBurst:
                      description: QueueBurst specifies workqueue rate limiter burst
                        for a controller
                      format: int32
                      type: integer
                    queueQPS:
                      description: QueueQPS specifies workqueue rate limiter QPS for
                        a controller
                      format: int32
                      type: integer
                    replicas:
                      description: Replicas specifies the number of replicas the specific
                        controller pod should use. This is ONLY for controllers that
                        have been split out into their own pods. This is ignored for
                        all others.
                      format: int32
                      type: integer
                  type: object
              type: object
            deleteProtection:
              description: DeleteProtection can be set to "enabled" to turn on automatic
                delete protection for ClusterDeployments. When enabled, Hive will
                add the "hive.openshift.io/protected-delete" annotation to new ClusterDeployments.
                Once a ClusterDeployment has been installed, a user must remove the
                annotation from a ClusterDeployment prior to deleting it.
              enum:
              - enabled
              type: string
            deprovisionsDisabled:
              description: DeprovisionsDisabled can be set to true to block deprovision
                jobs from running.
              type: boolean
            disabledControllers:
              description: DisabledControllers allows selectively disabling Hive controllers
                by name. The name of an individual controller matches the name of
                the controller as seen in the Hive logging output.
              items:
                type: string
              type: array
            failedProvisionConfig:
              description: FailedProvisionConfig is used to configure settings related
                to handling provision failures.
              properties:
                aws:
                  description: FailedProvisionAWSConfig contains AWS-specific info
                    to upload log files.
                  properties:
                    bucket:
                      description: Bucket is the S3 bucket to store the logs in.
                      type: string
                    credentialsSecretRef:
                      description: 'CredentialsSecretRef references a secret in the
                        TargetNamespace that will be used to authenticate with AWS
                        S3. It will need permission to upload logs to S3. Secret should
                        have keys named aws_access_key_id and aws_secret_access_key
                        that contain the AWS credentials. Example Secret:   data:     aws_access_key_id:
                        minio     aws_secret_access_key: minio123'
                      properties:
                        name:
                          description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                            TODO: Add other useful fields. apiVersion, kind, uid?'
                          type: string
                      type: object
                    region:
                      description: Region is the AWS region to use for S3 operations.
                        This defaults to us-east-1. For AWS China, use cn-northwest-1.
                      type: string
                    serviceEndpoint:
                      description: ServiceEndpoint is the url to connect to an S3
                        compatible provider.
                      type: string
                  required:
                  - credentialsSecretRef
                  type: object
                skipGatherLogs:
                  description: 'DEPRECATED: This flag is no longer respected and will
                    be removed in the future.'
                  type: boolean
              type: object
            globalPullSecretRef:
              description: GlobalPullSecretRef is used to specify a pull secret that
                will be used globally by all of the cluster deployments. For each
                cluster deployment, the contents of GlobalPullSecret will be merged
                with the specific pull secret for a cluster deployment(if specified),
                with precedence given to the contents of the pull secret for the cluster
                deployment. The global pull secret is assumed to be in the TargetNamespace.
              properties:
                name:
                  description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    TODO: Add other useful fields. apiVersion, kind, uid?'
                  type: string
              type: object
            logLevel:
              description: LogLevel is the level of logging to use for the Hive controllers.
                Acceptable levels, from coarsest to finest, are panic, fatal, error,
                warn, info, debug, and trace. The default level is info.
              type: string
            maintenanceMode:
              description: MaintenanceMode can be set to true to disable the hive
                controllers in situations where we need to ensure nothing is running
                that will add or act upon finalizers on Hive types. This should rarely
                be needed. Sets replicas to 0 for the hive-controllers deployment
                to accomplish this.
              type: boolean
            managedDomains:
              description: 'ManagedDomains is the list of DNS domains that are managed
                by the Hive cluster When specifying ''manageDNS: true'' in a ClusterDeployment,
                the ClusterDeployment''s baseDomain should be a direct child of one
                of these domains, otherwise the ClusterDeployment creation will result
                in a validation error.'
              items:
                description: ManageDNSConfig contains the domain being managed, and
                  the cloud-specific details for accessing/managing the domain.
                properties:
                  aws:
                    description: AWS contains AWS-specific settings for external DNS
                    properties:
                      credentialsSecretRef:
                        description: CredentialsSecretRef references a secret in the
                          TargetNamespace that will be used to authenticate with AWS
                          Route53. It will need permission to manage entries for the
                          domain listed in the parent ManageDNSConfig object. Secret
                          should have AWS keys named 'aws_access_key_id' and 'aws_secret_access_key'.
                        properties:
                          name:
                            description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                              TODO: Add other useful fields. apiVersion, kind, uid?'
                            type: string
                        type: object
                      region:
                        description: Region is the AWS region to use for route53 operations.
                          This defaults to us-east-1. For AWS China, use cn-northwest-1.
                        type: string
                    required:
                    - credentialsSecretRef
                    type: object
                  azure:
                    description: Azure contains Azure-specific settings for external
                      DNS
                    properties:
                      credentialsSecretRef:
                        description: CredentialsSecretRef references a secret in the
                          TargetNamespace that will be used to authenticate with Azure
                          DNS. It wil need permission to manage entries in each of
                          the managed domains listed in the parent ManageDNSConfig
                          object. Secret should have a key named 'osServicePrincipal.json'
                        properties:
                          name:
                            description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                              TODO: Add other useful fields. apiVersion, kind, uid?'
                            type: string
                        type: object
                      resourceGroupName:
                        description: ResourceGroupName specifies the Azure resource
                          group containing the DNS zones for the domains being managed.
                        type: string
                    required:
                    - credentialsSecretRef
                    - resourceGroupName
                    type: object
                  domains:
                    description: Domains is the list of domains that hive will be
                      managing entries for with the provided credentials.
                    items:
                      type: string
                    type: array
                  gcp:
                    description: GCP contains GCP-specific settings for external DNS
                    properties:
                      credentialsSecretRef:
                        description: CredentialsSecretRef references a secret in the
                          TargetNamespace that will be used to authenticate with GCP
                          DNS. It will need permission to manage entries in each of
                          the managed domains for this cluster. listed in the parent
                          ManageDNSConfig object. Secret should have a key named 'osServiceAccount.json'.
                          The credentials must specify the project to use.
                        properties:
                          name:
                            description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                              TODO: Add other useful fields. apiVersion, kind, uid?'
                            type: string
                        type: object
                    required:
                    - credentialsSecretRef
                    type: object
                required:
                - domains
                type: object
              type: array
            syncSetReapplyInterval:
              description: SyncSetReapplyInterval is a string duration indicating
                how much time must pass before SyncSet resources will be reapplied.
                The default reapply interval is two hours.
              type: string
            targetNamespace:
              description: TargetNamespace is the namespace where the core Hive components
                should be run. Defaults to "hive". Will be created if it does not
                already exist. All resource references in HiveConfig can be assumed
                to be in the TargetNamespace.
              type: string
          type: object
        status:
          description: HiveConfigStatus defines the observed state of Hive
          properties:
            aggregatorClientCAHash:
              description: AggregatorClientCAHash keeps an md5 hash of the aggregator
                client CA configmap data from the openshift-config-managed namespace.
                When the configmap changes, admission is redeployed.
              type: string
            configApplied:
              description: ConfigApplied will be set by the hive operator to indicate
                whether or not the LastGenerationObserved was successfully reconciled.
              type: boolean
            observedGeneration:
              description: ObservedGeneration will record the most recently processed
                HiveConfig object's generation.
              format: int64
              type: integer
          type: object
  version: v1
  versions:
  - name: v1
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
