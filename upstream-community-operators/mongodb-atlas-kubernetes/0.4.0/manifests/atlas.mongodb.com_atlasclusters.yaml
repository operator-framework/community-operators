apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: atlasclusters.atlas.mongodb.com
spec:
  group: atlas.mongodb.com
  names:
    kind: AtlasCluster
    listKind: AtlasClusterList
    plural: atlasclusters
    singular: atlascluster
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: AtlasCluster is the Schema for the atlasclusters API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: AtlasClusterSpec defines the desired state of AtlasCluster
            properties:
              autoScaling:
                description: Collection of settings that configures auto-scaling information for the cluster. If you specify the autoScaling object, you must also specify the providerSettings.autoScaling object.
                properties:
                  autoIndexingEnabled:
                    description: Flag that indicates whether autopilot mode for Performance Advisor is enabled. The default is false.
                    type: boolean
                  compute:
                    description: Collection of settings that configure how a cluster might scale its cluster tier and whether the cluster can scale down.
                    properties:
                      enabled:
                        description: Flag that indicates whether cluster tier auto-scaling is enabled. The default is false.
                        type: boolean
                      maxInstanceSize:
                        description: 'Maximum instance size to which your cluster can automatically scale (such as M40). Atlas requires this parameter if "autoScaling.compute.enabled" : true.'
                        type: string
                      minInstanceSize:
                        description: 'Minimum instance size to which your cluster can automatically scale (such as M10). Atlas requires this parameter if "autoScaling.compute.scaleDownEnabled" : true.'
                        type: string
                      scaleDownEnabled:
                        description: 'Flag that indicates whether the cluster tier may scale down. Atlas requires this parameter if "autoScaling.compute.enabled" : true.'
                        type: boolean
                    type: object
                  diskGBEnabled:
                    description: Flag that indicates whether disk auto-scaling is enabled. The default is true.
                    type: boolean
                type: object
              biConnector:
                description: Configuration of BI Connector for Atlas on this cluster. The MongoDB Connector for Business Intelligence for Atlas (BI Connector) is only available for M10 and larger clusters.
                properties:
                  enabled:
                    description: Flag that indicates whether or not BI Connector for Atlas is enabled on the cluster.
                    type: boolean
                  readPreference:
                    description: Source from which the BI Connector for Atlas reads data. Each BI Connector for Atlas read preference contains a distinct combination of readPreference and readPreferenceTags options.
                    type: string
                type: object
              clusterType:
                description: Type of the cluster that you want to create. The parameter is required if replicationSpecs are set or if Global Clusters are deployed.
                enum:
                - REPLICASET
                - SHARDED
                - GEOSHARDED
                type: string
              diskSizeGB:
                description: Capacity, in gigabytes, of the host's root volume. Increase this number to add capacity, up to a maximum possible value of 4096 (i.e., 4 TB). This value must be a positive integer. The parameter is required if replicationSpecs are configured.
                maximum: 4096
                minimum: 0
                type: integer
              encryptionAtRestProvider:
                description: Cloud service provider that offers Encryption at Rest.
                enum:
                - AWS
                - GCP
                - AZURE
                - NONE
                type: string
              labels:
                description: Collection of key-value pairs that tag and categorize the cluster. Each key and value has a maximum length of 255 characters.
                items:
                  description: LabelSpec contains key-value pairs that tag and categorize the Cluster/DBUser
                  properties:
                    key:
                      maxLength: 255
                      type: string
                    value:
                      type: string
                  required:
                  - key
                  - value
                  type: object
                type: array
              mongoDBMajorVersion:
                description: Version of the cluster to deploy.
                type: string
              name:
                description: Name of the cluster as it appears in Atlas. After Atlas creates the cluster, you can't change its name.
                type: string
              numShards:
                description: Positive integer that specifies the number of shards to deploy for a sharded cluster. The parameter is required if replicationSpecs are configured
                maximum: 50
                minimum: 1
                type: integer
              paused:
                description: Flag that indicates whether the cluster should be paused.
                type: boolean
              pitEnabled:
                description: Flag that indicates the cluster uses continuous cloud backups.
                type: boolean
              projectRef:
                description: Project is a reference to AtlasProject resource the cluster belongs to
                properties:
                  name:
                    description: Name is the name of the Kubernetes Resource
                    type: string
                required:
                - name
                type: object
              providerBackupEnabled:
                description: Applicable only for M10+ clusters. Flag that indicates if the cluster uses Cloud Backups for backups.
                type: boolean
              providerSettings:
                description: Configuration for the provisioned hosts on which MongoDB runs. The available options are specific to the cloud service provider.
                properties:
                  autoScaling:
                    description: Range of instance sizes to which your cluster can scale.
                    properties:
                      autoIndexingEnabled:
                        description: Flag that indicates whether autopilot mode for Performance Advisor is enabled. The default is false.
                        type: boolean
                      compute:
                        description: Collection of settings that configure how a cluster might scale its cluster tier and whether the cluster can scale down.
                        properties:
                          enabled:
                            description: Flag that indicates whether cluster tier auto-scaling is enabled. The default is false.
                            type: boolean
                          maxInstanceSize:
                            description: 'Maximum instance size to which your cluster can automatically scale (such as M40). Atlas requires this parameter if "autoScaling.compute.enabled" : true.'
                            type: string
                          minInstanceSize:
                            description: 'Minimum instance size to which your cluster can automatically scale (such as M10). Atlas requires this parameter if "autoScaling.compute.scaleDownEnabled" : true.'
                            type: string
                          scaleDownEnabled:
                            description: 'Flag that indicates whether the cluster tier may scale down. Atlas requires this parameter if "autoScaling.compute.enabled" : true.'
                            type: boolean
                        type: object
                      diskGBEnabled:
                        description: Flag that indicates whether disk auto-scaling is enabled. The default is true.
                        type: boolean
                    type: object
                  backingProviderName:
                    description: 'Cloud service provider on which the host for a multi-tenant cluster is provisioned. This setting only works when "providerSetting.providerName" : "TENANT" and "providerSetting.instanceSizeName" : M2 or M5.'
                    enum:
                    - AWS
                    - GCP
                    - AZURE
                    type: string
                  diskIOPS:
                    description: Disk IOPS setting for AWS storage. Set only if you selected AWS as your cloud service provider.
                    format: int64
                    type: integer
                  diskTypeName:
                    description: Type of disk if you selected Azure as your cloud service provider.
                    type: string
                  encryptEBSVolume:
                    description: Flag that indicates whether the Amazon EBS encryption feature encrypts the host's root volume for both data at rest within the volume and for data moving between the volume and the cluster.
                    type: boolean
                  instanceSizeName:
                    description: Atlas provides different cluster tiers, each with a default storage capacity and RAM size. The cluster you select is used for all the data-bearing hosts in your cluster tier.
                    type: string
                  providerName:
                    description: Cloud service provider on which Atlas provisions the hosts.
                    enum:
                    - AWS
                    - GCP
                    - AZURE
                    - TENANT
                    type: string
                  regionName:
                    description: Physical location of your MongoDB cluster. The region you choose can affect network latency for clients accessing your databases.
                    type: string
                  volumeType:
                    description: Disk IOPS setting for AWS storage. Set only if you selected AWS as your cloud service provider.
                    enum:
                    - STANDARD
                    - PROVISIONED
                    type: string
                required:
                - instanceSizeName
                - providerName
                type: object
              replicationSpecs:
                description: Configuration for cluster regions.
                items:
                  description: ReplicationSpec represents a configuration for cluster regions
                  properties:
                    numShards:
                      description: Number of shards to deploy in each specified zone. The default value is 1.
                      format: int64
                      type: integer
                    regionsConfig:
                      additionalProperties:
                        description: RegionsConfig describes the region’s priority in elections and the number and type of MongoDB nodes Atlas deploys to the region.
                        properties:
                          analyticsNodes:
                            description: The number of analytics nodes for Atlas to deploy to the region. Analytics nodes are useful for handling analytic data such as reporting queries from BI Connector for Atlas. Analytics nodes are read-only, and can never become the primary. If you do not specify this option, no analytics nodes are deployed to the region.
                            format: int64
                            type: integer
                          electableNodes:
                            description: Number of electable nodes for Atlas to deploy to the region. Electable nodes can become the primary and can facilitate local reads.
                            format: int64
                            type: integer
                          priority:
                            description: Election priority of the region. For regions with only replicationSpecs[n].regionsConfig.<region>.readOnlyNodes, set this value to 0.
                            format: int64
                            type: integer
                          readOnlyNodes:
                            description: Number of read-only nodes for Atlas to deploy to the region. Read-only nodes can never become the primary, but can facilitate local-reads.
                            format: int64
                            type: integer
                        type: object
                      description: Configuration for a region. Each regionsConfig object describes the region's priority in elections and the number and type of MongoDB nodes that Atlas deploys to the region.
                      type: object
                    zoneName:
                      description: Name for the zone in a Global Cluster. Don't provide this value if clusterType is not GEOSHARDED.
                      type: string
                  type: object
                type: array
            required:
            - name
            - projectRef
            - providerSettings
            type: object
          status:
            description: AtlasClusterStatus defines the observed state of AtlasCluster.
            properties:
              conditions:
                description: Conditions is the list of statuses showing the current state of the Atlas Custom Resource
                items:
                  description: Condition describes the state of an Atlas Custom Resource at a certain point.
                  properties:
                    lastTransitionTime:
                      description: Last time the condition transitioned from one status to another.
                      format: date-time
                      type: string
                    message:
                      description: A human readable message indicating details about the transition.
                      type: string
                    reason:
                      description: The reason for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of Atlas Custom Resource condition.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              connectionStrings:
                description: ConnectionStrings is a set of connection strings that your applications use to connect to this cluster.
                properties:
                  private:
                    description: Network-peering-endpoint-aware mongodb:// connection strings for each interface VPC endpoint you configured to connect to this cluster. Atlas returns this parameter only if you created a network peering connection to this cluster.
                    type: string
                  privateEndpoint:
                    description: Private endpoint connection strings. Each object describes the connection strings you can use to connect to this cluster through a private endpoint. Atlas returns this parameter only if you deployed a private endpoint to all regions to which you deployed this cluster's nodes.
                    items:
                      description: PrivateEndpoint connection strings. Each object describes the connection strings you can use to connect to this cluster through a private endpoint. Atlas returns this parameter only if you deployed a private endpoint to all regions to which you deployed this cluster's nodes.
                      properties:
                        connectionString:
                          description: Private-endpoint-aware mongodb:// connection string for this private endpoint.
                          type: string
                        endpoints:
                          description: Private endpoint through which you connect to Atlas when you use connectionStrings.privateEndpoint[n].connectionString or connectionStrings.privateEndpoint[n].srvConnectionString.
                          items:
                            description: Endpoint through which you connect to Atlas
                            properties:
                              endpointId:
                                description: Unique identifier of the private endpoint.
                                type: string
                              providerName:
                                description: Cloud provider to which you deployed the private endpoint. Atlas returns AWS or AZURE.
                                type: string
                              region:
                                description: Region to which you deployed the private endpoint.
                                type: string
                            type: object
                          type: array
                        srvConnectionString:
                          description: Private-endpoint-aware mongodb+srv:// connection string for this private endpoint.
                          type: string
                        type:
                          description: "Type of MongoDB process that you connect to with the connection strings \n Atlas returns: \n • MONGOD for replica sets, or \n • MONGOS for sharded clusters"
                          type: string
                      type: object
                    type: array
                  privateSrv:
                    description: Network-peering-endpoint-aware mongodb+srv:// connection strings for each interface VPC endpoint you configured to connect to this cluster. Atlas returns this parameter only if you created a network peering connection to this cluster. Use this URI format if your driver supports it. If it doesn't, use connectionStrings.private.
                    type: string
                  standard:
                    description: Public mongodb:// connection string for this cluster.
                    type: string
                  standardSrv:
                    description: Public mongodb+srv:// connection string for this cluster.
                    type: string
                type: object
              mongoDBVersion:
                description: MongoDBVersion is the version of MongoDB the cluster runs, in <major version>.<minor version> format.
                type: string
              mongoURIUpdated:
                description: MongoURIUpdated is a timestamp in ISO 8601 date and time format in UTC when the connection string was last updated. The connection string changes if you update any of the other values.
                type: string
              observedGeneration:
                description: ObservedGeneration indicates the generation of the resource specification that the Atlas Operator is aware of. The Atlas Operator updates this field to the 'metadata.generation' as soon as it starts reconciliation of the resource.
                format: int64
                type: integer
              stateName:
                description: 'StateName is the current state of the cluster. The possible states are: IDLE, CREATING, UPDATING, DELETING, DELETED, REPAIRING'
                type: string
            required:
            - conditions
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
